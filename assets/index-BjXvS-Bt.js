var O=i=>{throw TypeError(i)};var j=(i,s,t)=>s.has(i)||O("Cannot "+t);var r=(i,s,t)=>(j(i,s,"read from private field"),t?t.call(i):s.get(i)),x=(i,s,t)=>s.has(i)?O("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(i):s.set(i,t),b=(i,s,t,e)=>(j(i,s,"write to private field"),e?e.call(i,t):s.set(i,t),t),g=(i,s,t)=>(j(i,s,"access private method"),t);import{S as k,s as D,h as C,g as L,n as N,u as R,r as v,a as q,b as H,c as K,d as T,e as U,f as A,j as n,I as B,B as F,L as _,o as J}from"./index-C0XN057f.js";import{S as W}from"./index-zmn6C5g9.js";import{L as Z}from"./loader-circle-CSihmqUa.js";var c,m,o,h,u,S,M,E,z=(E=class extends k{constructor(s,t){super();x(this,u);x(this,c);x(this,m);x(this,o);x(this,h);b(this,c,s),this.setOptions(t),this.bindMethods(),g(this,u,S).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(s){var e;const t=this.options;this.options=r(this,c).defaultMutationOptions(s),D(this.options,t)||r(this,c).getMutationCache().notify({type:"observerOptionsUpdated",mutation:r(this,o),observer:this}),t!=null&&t.mutationKey&&this.options.mutationKey&&C(t.mutationKey)!==C(this.options.mutationKey)?this.reset():((e=r(this,o))==null?void 0:e.state.status)==="pending"&&r(this,o).setOptions(this.options)}onUnsubscribe(){var s;this.hasListeners()||(s=r(this,o))==null||s.removeObserver(this)}onMutationUpdate(s){g(this,u,S).call(this),g(this,u,M).call(this,s)}getCurrentResult(){return r(this,m)}reset(){var s;(s=r(this,o))==null||s.removeObserver(this),b(this,o,void 0),g(this,u,S).call(this),g(this,u,M).call(this)}mutate(s,t){var e;return b(this,h,t),(e=r(this,o))==null||e.removeObserver(this),b(this,o,r(this,c).getMutationCache().build(r(this,c),this.options)),r(this,o).addObserver(this),r(this,o).execute(s)}},c=new WeakMap,m=new WeakMap,o=new WeakMap,h=new WeakMap,u=new WeakSet,S=function(){var t;const s=((t=r(this,o))==null?void 0:t.state)??L();b(this,m,{...s,isPending:s.status==="pending",isSuccess:s.status==="success",isError:s.status==="error",isIdle:s.status==="idle",mutate:this.mutate,reset:this.reset})},M=function(s){N.batch(()=>{var t,e,a,p,l,d,I,w;if(r(this,h)&&this.hasListeners()){const f=r(this,m).variables,y=r(this,m).context;(s==null?void 0:s.type)==="success"?((e=(t=r(this,h)).onSuccess)==null||e.call(t,s.data,f,y),(p=(a=r(this,h)).onSettled)==null||p.call(a,s.data,null,f,y)):(s==null?void 0:s.type)==="error"&&((d=(l=r(this,h)).onError)==null||d.call(l,s.error,f,y),(w=(I=r(this,h)).onSettled)==null||w.call(I,void 0,s.error,f,y))}this.listeners.forEach(f=>{f(r(this,m))})})},E);function P(i,s){return typeof i=="function"?i(...s):!!i}function $(){}function Q(i,s){const t=R(),[e]=v.useState(()=>new z(t,i));v.useEffect(()=>{e.setOptions(i)},[e,i]);const a=v.useSyncExternalStore(v.useCallback(l=>e.subscribe(N.batchCalls(l)),[e]),()=>e.getCurrentResult(),()=>e.getCurrentResult()),p=v.useCallback((l,d)=>{e.mutate(l,d).catch($)},[e]);if(a.error&&P(e.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:p,mutateAsync:a.mutate}}const V=()=>{const i=q(),s=H();return Q({mutationFn:async e=>(console.log("payload: ",e),{id:1,name:"John Doe",email:"johndoe@gmail.com",profileImage:"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MjJ8fHVzZXJ8ZW58MHx8MHx8fDA%3D",accessToken:"accessToken123"}),onSuccess:e=>{console.log("data: ",e),i(K({id:e==null?void 0:e.id,name:e==null?void 0:e.name,email:e==null?void 0:e.email,profileImage:e==null?void 0:e.profileImage,accessToken:e==null?void 0:e.accessToken})),s("/")},onError:e=>{console.log("error: ",e)}})},X=T({email:U().email("Invalid email").required("Email is required")}),ts=()=>{var l;const{register:i,handleSubmit:s,formState:{errors:t}}=A({resolver:J(X)}),{mutate:e,isPending:a}=V(),p=d=>e(d);return n.jsx(n.Fragment,{children:n.jsx("div",{className:"bg-slate-50 min-h-screen flex items-center justify-center",children:n.jsxs("div",{className:"max-w-xl w-full p-5 md:p-8 bg-white shadow-[0_0_10px_0_rgba(0,0,0,0.1)] rounded-lg",children:[n.jsx("h1",{className:"text-2xl font-bold text-primary",children:"Welcome Back!"}),n.jsxs("form",{className:"mt-5 space-y-4",onSubmit:s(p),children:[n.jsx("div",{children:n.jsx(B,{type:"email",placeholder:"Email",className:"h-12 px-4",...i("email"),error:(l=t.email)==null?void 0:l.message})}),n.jsx("div",{children:n.jsxs(F,{type:"submit",className:"w-full h-12 font-semibold",disabled:a,children:["Sign In",a&&n.jsx(Z,{className:"w-4 h-4 ml-1 animate-spin"})]})})]}),n.jsx("div",{className:"mt-5 max-w-[200px] w-full mx-auto",children:n.jsx(W,{})}),n.jsxs("p",{className:"mt-5 text-center font-medium text-sm",children:["Don't have an account?",n.jsx(_,{to:"/sign-up",className:"text-primary font-semibold ml-1.5 hover:opacity-80",children:"Sign Up"})]})]})})})};export{ts as default};
